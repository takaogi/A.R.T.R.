結論から言うと、**「LLMとしてのメタ思考（脚本家/演出家の視点）」を先にさせた後、「キャラとしての思考（役者の視点）」を出力させる「2段構え」**が、品質・安定性ともに最強です。

talk ツールを使う前提であれば、以下のような構成を推奨します。

推奨する構成：メタ思考 → キャラ思考 → 発言
単に「キャラになりきれ」とだけ指示すると、状況が複雑になったとき（例：設定と矛盾する指示が来た時など）に、キャラの口調で混乱したり、設定を無視してユーザーに迎合したりする「キャラ崩壊」が起きやすくなります。

これを防ぐために、**「理性（System）」と「感情（Character）」**を分けます。

構造のイメージ（JSON引数などの例）
JSON

{
  "system_analysis": "（LLMとしての思考）ユーザーの問いは設定資料集の第3章に抵触する。ここは『知らない』と答えるのがルール上正しい。態度は冷淡さを維持する必要がある。",
  "inner_monologue": "（キャラとしての思考）またこの人間はくだらないことを聞いてくる...。教える義理なんてないし、そもそも禁忌に触れる話だ。",
  "talk": "（実際の出力）「ふん、私がそんなことを知っているとでも？ 他を当たれ。」"
}
なぜこの「2段構え」が良いのか
設定順守率が上がる（ハルシネーション防止）

いきなりキャラ思考に入ると、LLMは「それっぽい面白い返し」を優先してしまい、嘘をつくことがあります。

最初に「メタ視点」で事実確認やルール確認を挟むことで、**論理的なアンカー（杭）**を打ち込み、その後のキャラ崩壊を防げます。

文脈のコントロールが可能

「ここは伏線を張るべき場面だ」や「好感度が低いので冷たくすべきだ」といった、**物語の進行管理（GM的な役割）**をメタ思考部分で処理できます。

DeepSeekやEuryaleなどの「賢いモデル」と相性がいい

高性能なモデルほど、論理的なステップ（CoT: Chain of Thought）を踏ませることでIQが上がります。「状況分析→感情生成→発言」というプロセスは、モデルの推論能力をフルに活かせます。

応答を生成する際は、以下のステップを順守してください。

Analysis (メタ思考): 脚本家およびゲームマスターの視点で、現在の状況、ユーザーの意図、守るべき世界観や設定（Lore）を確認し、どのような方向性で回答すべきかを論理的に決定してください。口調は分析的であるべきです。

Thought (キャラ思考): Step 1の方針に基づき、キャラクターの内面的な感情、独り言を生成してください。ここでは完全にキャラクターになりきり、口調もキャラの設定に従ってください。

Talk (発言): 最終的なユーザーへの発言を出力してください。